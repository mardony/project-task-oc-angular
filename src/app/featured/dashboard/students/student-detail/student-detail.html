<div class="detail-container">
  <div class="detail-header">
    <button mat-button (click)="onBack()" class="back-button">
      <mat-icon>arrow_back</mat-icon>
      Volver
    </button>
    
    <div class="header-actions">
      <button mat-flat-button color="primary" (click)="onEdit()">
        <mat-icon>edit</mat-icon>
        Editar
      </button>
      <button mat-stroked-button color="warn" (click)="onDelete()">
        <mat-icon>delete</mat-icon>
        Eliminar
      </button>
    </div>
  </div>
  
  @if (student$ | async; as student) {
    <div class="student-card">
      <div class="student-header">
        <div class="avatar">
          <mat-icon>person</mat-icon>
        </div>
        <div class="student-info">
          <h1>{{ student.name }}</h1>
          <div class="student-meta">
            <span class="profile-badge" [class]="'profile-' + student.profile.toLowerCase()">
              {{ getProfileLabel(student.profile) }}
            </span>
            <span class="student-id">ID: {{ student.id }}</span>
          </div>
        </div>
      </div>
      
      <div class="student-details">
        <div class="detail-grid">
          <div class="detail-item">
            <mat-icon>email</mat-icon>
            <div>
              <h3>Email</h3>
              <p>{{ student.email }}</p>
            </div>
          </div>
          
          <div class="detail-item">
            <mat-icon>phone</mat-icon>
            <div>
              <h3>Teléfono</h3>
              <p>{{ student.phone }}</p>
            </div>
          </div>
          
          <div class="detail-item">
            <mat-icon>location_on</mat-icon>
            <div>
              <h3>Dirección</h3>
              <p>{{ student.address }}</p>
            </div>
          </div>
          
          <div class="detail-item">
            <mat-icon>calendar_today</mat-icon>
            <div>
              <h3>Fecha de registro</h3>
              <p>{{ formatDate(student.createdAt) }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="inscriptions-section">
      <h2>Cursos Inscritos</h2>
      
      @if (inscriptions$ | async; as inscriptions) {
        @if (inscriptions.length > 0) {
          <div class="inscriptions-grid">
            @for (inscription of inscriptions; track inscription.id) {
              <mat-card class="inscription-card">
                <mat-card-header>
                  <mat-card-title>{{ inscription.courseTitle }}</mat-card-title>
                  <mat-card-subtitle>
                    Inscrito el {{ formatDate(inscription.inscriptionDate) }}
                  </mat-card-subtitle>
                </mat-card-header>
                <mat-card-actions>
                  <button mat-button color="primary" 
                          [routerLink]="['/dashboard/courses']">
                    Ver curso
                  </button>
                </mat-card-actions>
              </mat-card>
            }
          </div>
        } @else {
          <div class="no-inscriptions">
            <mat-icon>school</mat-icon>
            <p>El alumno no está inscrito en ningún curso</p>
            <button mat-flat-button color="primary" 
                    routerLink="/dashboard/inscriptions/create">
              Inscribir en curso
            </button>
          </div>
        }
      }
    </div>
  } @else {
    <div class="loading-container">
      <mat-spinner></mat-spinner>
      <p>Cargando información del alumno...</p>
    </div>
  }
</div>